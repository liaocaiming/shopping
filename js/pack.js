;/*!js/SetHTMLFontSize/SetHtmlFontSize.js*/
define("js/SetHTMLFontSize/SetHtmlFontSize",function(){"use strict";!function(){function n(){var n=document.documentElement.clientWidth,e=n/18.75;12>e?e=12:e>30&&(e=30),document.documentElement.style.fontSize=e+"px"}window.onresize=n,window.onload=n}()});
;/*!js/unit/ImgLoad.js*/
define("js/unit/ImgLoad",function(t,i,s){"use strict";var e=function(t,i,s){this.step=t,this.success=i,this.errorfn=s,this.init()};e.prototype={init:function(){this.totalItemNum=this.itemNum=1,this.totalBgNum=this.bgNum=2,this.load()},getItemImgUrl:function(t){return"img/item/0"+t+".jpg"},getBgImgUrl:function(t){return"img/bg/bg0"+t+".png"},dealNum:function(t){t?this.bgNum--:this.itemNum--},loadImg:function(t,i){var s,e=this,m=this.totalBgNum+this.totalItemNum,o=new Image;o.onload=function(){e.dealNum(i),0===e.bgNum&&0===e.itemNum?e.success&&e.success(m):(s=m-e.bgNum-e.itemNum,e.step&&e.step(m,s))},o.onerror=function(){e.dealNum(i);var t=m-e.bgNum-e.itemNum;e.errorfn&&e.errorfn(m,t),m===t&&e.success&&e.success(m)},o.src=t},load:function(){for(var t=this.itemNum,i=this.bgNum;--t>=0;)this.loadImg(this.getItemImgUrl(t));for(;--i>=0;)this.loadImg(this.getBgImgUrl(i),!0);console.log(t),console.log(i)}},s.exports=e});
;/*!js/unit/Unit.js*/
define("js/unit/Unit",function(t,e,n){"use strict";var s={tpl:function(t){return document.getElementById(t).innerHTML},ajax:function(t,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&(n.status>=200||304==n.status)){var t=JSON.parse(n.responseText);e&&e(t)}},n.open("GET",t,!0),n.send(null)}};n.exports=s});
;/*!js/carousel/FingerCarousel.js*/
define("js/carousel/FingerCarousel",function(t,i,s){"use strict";function e(t){this.carousel=document.querySelector("#"+t),this.lis=document.querySelectorAll("#"+t+" ul li"),this.xiaoyuandians=document.querySelectorAll("#"+t+" ol li"),this.ul=document.querySelector("#"+t+" ul"),this.loading=document.querySelector("#"+t+" .loading"),this.images=document.querySelectorAll("#"+t+" ul li img");for(var i=this,s=0,e=0;s<this.images.length;s++)this.images[s].onload=function(){e++,e==i.images.length&&(i.ul.style.display="block")};this.init(),this.setInterval(),this.carousel.addEventListener("touchstart",function(t){i.touchstartHandler.call(i,t)},!1),this.carousel.addEventListener("touchmove",function(t){i.touchmoveHandler.call(i,t)},!1),this.carousel.addEventListener("touchend",function(t){i.touchendHandler.call(i,t)},!1),window.addEventListener("resize",function(){i.init.call(i)},!1)}e.prototype.init=function(){this.w=parseFloat(getComputedStyle(this.carousel).width),this.amout=0,this.idx=0,this.nextIdx=1,this.prevIdx=this.lis.length-1,this.carousel.style.height=this.w*(280/750)+"px",this.lis[0].style.transition="none",this.lis[0].style.webkitTransform="translate3d(0px,0,0)";for(var t=1;t<this.lis.length;t++)this.lis[t].style.transition="none",this.lis[t].style.webkitTransform="translate3d("+this.w+"px,0,0)"},e.prototype.touchstartHandler=function(t){t.preventDefault(),this.startTime=new Date;var i=t.touches[0];this.startX=i.clientX,this.lis[this.idx].style.webkitTransition="none",this.lis[this.prevIdx].style.webkitTransition="none",this.lis[this.nextIdx].style.webkitTransition="none",this.lis[this.idx].style.webkitTransform="translate3d(0px,0,0)",this.lis[this.nextIdx].style.webkitTransform="translate3d("+this.w+"px,0,0)",this.lis[this.prevIdx].style.webkitTransform="translate3d("+-this.w+"px,0,0)"},e.prototype.touchmoveHandler=function(t){t.preventDefault();var i=t.touches[0];this.dx=i.clientX-this.startX,this.lis[this.idx].style.webkitTransform="translate3d("+(0+this.dx)+"px,0,0)",this.lis[this.nextIdx].style.webkitTransform="translate3d("+(this.w+this.dx)+"px,0,0)",this.lis[this.prevIdx].style.webkitTransform="translate3d("+(-this.w+this.dx)+"px,0,0)"},e.prototype.touchendHandler=function(t){t.preventDefault();var i=new Date-this.endTime;this.endTime=new Date;var s=this.endTime-this.startTime;if(300>i)var e="none";else var e="all 0.3s cubic-bezier(0.56, 1.24, 1, 0.98) 0s";this.dx>=this.w/2||this.dx>10&&200>s&&s>0?(this.lis[this.idx].style.webkitTransition=e,this.lis[this.idx].style.webkitTransform="translate3d("+this.w+"px,0,0)",this.lis[this.prevIdx].style.webkitTransition=e,this.lis[this.prevIdx].style.webkitTransform="translate3d(0px,0,0)",this.amout++,this.nextIdx=this.idx,this.idx=this.prevIdx,this.prevIdx--,this.prevIdx<0&&(this.prevIdx=this.lis.length-1)):this.dx<=-this.w/2||this.dx<-10&&200>s&&s>0?(this.amout++,this.lis[this.idx].style.webkitTransition=e,this.lis[this.idx].style.webkitTransform="translate3d("+-this.w+"px,0,0)",this.lis[this.nextIdx].style.webkitTransition=e,this.lis[this.nextIdx].style.webkitTransform="translate3d(0px,0,0)",this.prevIdx=this.idx,this.idx=this.nextIdx,this.nextIdx++,this.nextIdx>this.lis.length-1&&(this.nextIdx=0)):(this.lis[this.idx].style.webkitTransition="all 0.3s cubic-bezier(0.56, 1.24, 1, 0.98) 0s",this.lis[this.idx].style.webkitTransform="translate3d(0px,0,0)",this.lis[this.nextIdx].style.webkitTransition="all 0.3s cubic-bezier(0.56, 1.24, 1, 0.98) 0s",this.lis[this.nextIdx].style.webkitTransform="translate3d("+this.w+"px,0,0)",this.lis[this.prevIdx].style.webkitTransition="all 0.3s cubic-bezier(0.56, 1.24, 1, 0.98) 0s",this.lis[this.prevIdx].style.webkitTransform="translate3d("+-this.w+"px,0,0)");for(var n=0;n<this.xiaoyuandians.length;n++)this.xiaoyuandians[n].className="";this.xiaoyuandians[this.amout%2].className="cur"},e.prototype.setInterval=function(){var t="all 0.3s linear 0s",i=this;clearInterval(s);var s=setInterval(function(){i.amout++,i.lis[i.idx].style.webkitTransition=t,i.lis[i.nextIdx].style.webkitTransition=t,i.lis[i.prevIdx].style.webkitTransition=t,i.lis[i.idx].style.webkitTransform="translate3d("+-i.w+"px,0,0)",i.lis[i.nextIdx].style.webkitTransform="translate3d(0px,0,0)",i.prevIdx=i.idx,i.idx=i.nextIdx,i.nextIdx++,i.nextIdx>i.lis.length-1&&(i.nextIdx=0),i.lis[i.nextIdx].style.webkitTransition="none",i.lis[i.nextIdx].style.webkitTransform="translate3d("+i.w+"px,0,0)";for(var s=0;s<i.xiaoyuandians.length;s++)i.xiaoyuandians[s].className="";i.xiaoyuandians[i.amout%2].className="cur"},3e3)},s.exports=e});
;/*!js/components/HomeComponent.js*/
define("js/components/HomeComponent",function(t,e,i){"use strict";var n=t("js/unit/Unit"),r=t("js/carousel/FingerCarousel"),l=Vue.extend({template:n.tpl("tpl-home"),props:["csearch"],data:function(){return{types:[{id:1,title:"美食",url:"01.png"},{id:2,title:"电影",url:"02.png"},{id:3,title:"酒店",url:"03.png"},{id:4,title:"休闲娱乐",url:"04.png"},{id:5,title:"外卖",url:"05.png"},{id:6,title:"KTV",url:"06.png"},{id:7,title:"周边游",url:"07.png"},{id:8,title:"丽人",url:"08.png"},{id:9,title:"小吃快餐",url:"09.png"},{id:10,title:"火车票",url:"10.png"}],bg:[{src:"bg00.png"},{src:"bg01.png"},{src:"bg00.png"},{src:"bg01.png"}],ad:[],list:[]}},created:function(){var t=this;this.$dispatch("show-search",!0),n.ajax("data/home.json",function(e){e&&0==e.errno&&(t.$set("ad",e.data.ad),t.$set("list",e.data.list),new r("carousel"))})}});i.exports=l});
;/*!js/components/ListComponent.js*/
define("js/components/ListComponent",function(t,e,s){"use strict";var i=t("js/unit/Unit"),o=Vue.extend({template:i.tpl("tpl-list"),props:["csearch"],data:function(){return{types:[{value:"价格排序",key:"price"},{value:"销量排序",key:"sales"},{value:"好评排序",key:"evaluate"},{value:"优惠排序",key:"discount"}],list:[],others:[],state:0}},created:function(){var t=this;this.$dispatch("show-search",!0),i.ajax("data/list.json",function(e){e&&0==e.errno&&(t.$set("list",e.data.slice(0,3)),t.$set("others",e.data.slice(3))),console.log(t)})},methods:{loadMore:function(){this.list=[].concat(this.list,this.others),this.$el.children[3].style.display="none"},sortBy:function(t){this.state=0==this.state?1:0;var e=this;this.list.sort("discount"===t?function(t,s){var i=t.orignPrice-t.price,o=s.orignPrice-s.price;return(e.state=0)?(console.log(e.state),i-o):o-i}:function(s,i){return(e.state=0)?(console.log(e.state),s[t]-i[t]):i[t]-s[t]})},goBack:function(){history.go(-1)}}});s.exports=o});
;/*!js/components/ProductComponent.js*/
define("js/components/ProductComponent",function(t,o,n){"use strict";var e=t("js/unit/Unit"),c=Vue.extend({template:e.tpl("tpl-product"),data:function(){return{product:[]}},created:function(){var t=this;this.$dispatch("show-search",!1),e.ajax("data/product.json",function(o){o&&0==o.errno&&t.$set("product",o.data)})},methods:{goBack:function(){history.go(-1)}}});n.exports=c});
;/*!js/components/SearchComponent.js*/
define("js/components/SearchComponent",function(e,t,a){"use strict";var n=e("js/unit/Unit"),u=Vue.extend({template:n.tpl("tpl-search"),data:function(){return{types:[{value:"旅游"},{value:"美食"},{value:"火锅"},{value:"自助餐"},{value:"蛋糕"},{value:"体验"},{value:"ktv"},{value:"游泳"}]}},created:function(){},methods:{cancelSearch:function(){location.hash="#/home/"}}});a.exports=u});
;/*!js/components/LoginComponent.js*/
define("js/components/LoginComponent",function(e,l,n){"use strict";var i=e("js/unit/Unit"),r=Vue.extend({template:i.tpl("tpl-login"),data:function(){return{num:60,timer:""}},methods:{goBack:function(){history.go(-1)},showFast:function(){console.log(this);var e=this.$el.children[1].children[0].children[0],l=this.$el.children[1].children[0].children[1],n=this.$el.children[1].children[1][0],i=this.$el.children[1].children[1][1],r=this.$el.children[1].children[1][2];e.className="cur",l.className="",r.className="",r.value="获取验证码",n.placeholder="请输入手机号码",i.placeholder="请输入验证码"},showUser:function(){clearInterval(this.timer);var e=this.$el.children[1].children[0].children[0],l=this.$el.children[1].children[0].children[1],n=this.$el.children[1].children[1][0],i=this.$el.children[1].children[1][1],r=this.$el.children[1].children[1][2];n.placeholder="用户名 / 邮箱 / 手机号",i.placeholder="登录密码",e.className="",e.value="",l.className="cur",r.className="cur",r.value="",this.num=60},getYzm:function(e){var l=this,n=e.target;clearInterval(this.timer),this.timer=setInterval(function(){l.num--,n.value="正在发送 "+l.num+" s",0===l.num&&(n.value="重新发送",l.num=60,clearInterval(l.timer))},1e3)}}});n.exports=r});
;/*!js/components/RegisterComponent.js*/
define("js/components/RegisterComponent",function(t,e,n){"use strict";var r=t("js/unit/Unit"),i=Vue.extend({template:r.tpl("tpl-register"),data:function(){return{num:60,timer:""}},methods:{goBack:function(){history.go(-1),clearInterval(this.timer),this.num=60},getYzm:function(t){var e=this,n=t.target;clearInterval(this.timer),this.timer=setInterval(function(){e.num--,n.value="正在发送 "+e.num+" s",0===e.num&&(n.value="重新发送",e.num=60,clearInterval(e.timer))},1e3)}}});n.exports=i});
;/*!js/app.js*/
define("js/app",function(e){"use strict";function n(){var e=location.hash;e=e.slice(2),e.indexOf("/")>-1&&(e=e.slice(0,e.indexOf("/")));var n={home:!0,list:!0,product:!0,search:!0,login:!0,register:!0};console.log(e),u.view=n[e]?e:"home"}e("js/SetHTMLFontSize/SetHtmlFontSize");var o=e("js/unit/ImgLoad");Vue.filter("price",function(e){return e+"元"}),Vue.filter("orignPrice",function(e){return"门市价:"+e+"元"}),Vue.filter("salses",function(e){return"已售"+e});var t=e("js/components/HomeComponent"),i=e("js/components/ListComponent"),s=e("js/components/ProductComponent"),c=e("js/components/SearchComponent"),r=e("js/components/LoginComponent"),m=e("js/components/RegisterComponent");Vue.component("home",t),Vue.component("list",i),Vue.component("product",s),Vue.component("search",c),Vue.component("login",r),Vue.component("register",m);var u,a=document.getElementById("loading-num"),d=document.getElementById("loader");new o(function(e,n){var o=(n/e*100).toFixed(2);a.innerHTML=o},function(){a.innerHTML=100,d.style.display="none",u=new Vue({el:"#app",data:{view:"home",text:"",dealText:"",isShow:!0},methods:{goSearch:function(){this.dealText=this.text},goBack:function(){history.go(-1)}},events:{"show-search":function(e){this.isShow=e}}})}),window.addEventListener("load",n),window.addEventListener("hashchange",n)});