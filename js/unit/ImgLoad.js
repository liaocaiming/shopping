define("js/unit/ImgLoad",function(t,i,s){"use strict";var e=function(t,i,s){this.step=t,this.success=i,this.errorfn=s,this.init()};e.prototype={init:function(){this.totalItemNum=this.itemNum=1,this.totalBgNum=this.bgNum=2,this.load()},getItemImgUrl:function(t){return"img/item/0"+t+".jpg"},getBgImgUrl:function(t){return"img/bg/bg0"+t+".png"},dealNum:function(t){t?this.bgNum--:this.itemNum--},loadImg:function(t,i){var s,e=this,m=this.totalBgNum+this.totalItemNum,o=new Image;o.onload=function(){e.dealNum(i),0===e.bgNum&&0===e.itemNum?e.success&&e.success(m):(s=m-e.bgNum-e.itemNum,e.step&&e.step(m,s))},o.onerror=function(){e.dealNum(i);var t=m-e.bgNum-e.itemNum;e.errorfn&&e.errorfn(m,t),m===t&&e.success&&e.success(m)},o.src=t},load:function(){for(var t=this.itemNum,i=this.bgNum;--t>=0;)this.loadImg(this.getItemImgUrl(t));for(;--i>=0;)this.loadImg(this.getBgImgUrl(i),!0);console.log(t),console.log(i)}},s.exports=e});